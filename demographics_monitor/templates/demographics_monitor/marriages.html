{% extends 'base.html' %}
{% block content %}
{% include 'demographics_monitor/includes/nav.html' %}

<main class="main">
    <div id="navbar">
        <div class="section-name">
            Основные показатели брачности и разводимости
        </div>
    </div>
    <div class="frame-section">
        <form action="" method="post" class="period-selection-form">
            {% csrf_token %}
            <label for="start_date">Выберите период с </label>
            {{ form.start_date }}
            <label for="end_date">по</label>
            {{ form.end_date }}
            <input type="submit" value="Показать">
        </form>
    </div>

    <div class="sub-section-name">
        Т а б л и ц а 1 - Основные показатели брачности и разводимости населения с {{ years|first }} по {{ years|last }} гг.
    </div>
    <div class="frame-section">
        <table class="table-marriages">
            <thead>
                <tr>
                    <th>Показатель</th>
                    <th>Единица измерения</th>
                    {% for year in years %}
                        <th>{{ year }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% load custom_tags %}
                {% for indicator, data in data_by_indicator.items %}
                    <tr>
                        <td>{{ indicator }}</td>
                        <td>{{ data.unit }}</td>
                        {% for year in years %}
                            <td>{{ data.values|get_item:year }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="sub-section-name">
        Р и с. 1 - Динамика числа браков, разводов и индекса разводимости с {{ years|first }} по {{ years|last }} гг.
    </div>
    <div class="frame-section">
        <figure class="highcharts-figure"><div id="container3"></div></figure>
        {% include 'demographics_monitor/includes/3-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container1"></div></figure>
        {% include 'demographics_monitor/includes/1-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container2"></div></figure>
        {% include 'demographics_monitor/includes/2-graphic-marriages.html' %}
    </div>

    <div class="sub-section-name">
        Р и с. 2 - Динамика числа браков, разводов и индекса разводимости в разрезе территорий с {{ years|first }} по {{ years|last }} гг.
    </div>
    <div class="frame-section">
        <figure class="highcharts-figure"><div id="container4"></div></figure>
        {% include 'demographics_monitor/includes/4-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container5"></div></figure>
        {% include 'demographics_monitor/includes/5-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container6"></div></figure>
        {% include 'demographics_monitor/includes/6-graphic-marriages.html' %}
    </div>

    <div class="sub-section-name">
        Р и с. 3 - Динамика общих коэффициентов брачности и разводимости с {{ years|first }} по {{ years|last }} гг.
    </div>
    <div class="frame-section">
        <figure class="highcharts-figure"><div id="container9"></div></figure>
        {% include 'demographics_monitor/includes/9-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container7"></div></figure>
        {% include 'demographics_monitor/includes/7-graphic-marriages.html' %}
        <figure class="highcharts-figure"><div id="container8"></div></figure>
        {% include 'demographics_monitor/includes/8-graphic-marriages.html' %}
    </div>

    <div class="sub-section-name">
        Р и с. 4 - Динамика общих коэффициентов брачности и разводимости в разрезе территорий с {{ years|first }} по {{ years|last }} гг.
    </div>
    <div class="frame-section">
        <figure class="highcharts-figure">
            <div id="container10"></div>
        </figure>
        {% include 'demographics_monitor/includes/10-graphic-marriages.html' %}
        <figure class="highcharts-figure">
            <div id="container11"></div>
        </figure>
        {% include 'demographics_monitor/includes/11-graphic-marriages.html' %}
    </div>

    <div class="sub-section-name">
        Р и с. 5 - Рейтинг муниципальных образований Алтайского края на {{ years|last }} г.
    </div>
    <div class="frame-section">
        <figure class="highcharts-figure">
            <div id="container12"></div>
        </figure>
        {% include 'demographics_monitor/includes/12-graphic-marriages.html' %}
        <figure class="highcharts-figure">
            <div id="container13"></div>
        </figure>
        {% include 'demographics_monitor/includes/13-graphic-marriages.html' %}
        <figure class="highcharts-figure">
            <div id="container14"></div>
        </figure>
        {% include 'demographics_monitor/includes/14-graphic-marriages.html' %}
    </div>
</main>

<script>
    window.onscroll = function() {myFunction()};
    var navbar = document.getElementById("navbar");
    var sticky = navbar.offsetTop;
    function myFunction() {
        if (window.pageYOffset >= sticky) {
            navbar.classList.add("sticky")
        } else {
            navbar.classList.remove("sticky");
        }
    }
</script>
{% endblock %}